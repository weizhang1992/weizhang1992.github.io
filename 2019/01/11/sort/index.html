<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Sort | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Summary bubble sort: know it select sort: know it insert sort: understand it merge sort: implement it quick sort: implement it quick select: implement it heap sort: implement it external sort: know it">
<meta property="og:type" content="article">
<meta property="og:title" content="Sort">
<meta property="og:url" content="http://yoursite.com/2019/01/11/sort/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Summary bubble sort: know it select sort: know it insert sort: understand it merge sort: implement it quick sort: implement it quick select: implement it heap sort: implement it external sort: know it">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2020-03-29T23:43:20.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sort">
<meta name="twitter:description" content="Summary bubble sort: know it select sort: know it insert sort: understand it merge sort: implement it quick sort: implement it quick select: implement it heap sort: implement it external sort: know it">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-sort" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/11/sort/" class="article-date">
  <time datetime="2019-01-11T05:00:00.000Z" itemprop="datePublished">2019-01-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Sort
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><ul>
<li>bubble sort: know it</li>
<li>select sort: know it</li>
<li>insert sort: understand it</li>
<li><strong>merge sort</strong>: implement it</li>
<li><strong>quick sort</strong>: implement it</li>
<li><strong>quick select</strong>: implement it</li>
<li><strong>heap sort</strong>: implement it</li>
<li>external sort: know it</li>
<li>shell sort: know it</li>
<li>count sort: understand it</li>
<li>radix sort: understand it</li>
<li>bucket sort: understand it</li>
<li>related questions<ul>
<li><strong>two point</strong>/sliding window related question</li>
<li>other sort related question</li>
<li>string related question</li>
<li><strong>line sweep</strong> problem</li>
<li>reservoir sampling</li>
</ul>
</li>
</ul>
<h2 id="compare-based-sort"><a href="#compare-based-sort" class="headerlink" title="compare based sort"></a>compare based sort</h2><h4 id="elementary-sort"><a href="#elementary-sort" class="headerlink" title="elementary sort"></a>elementary sort</h4><ul>
<li><strong>bubble sort</strong><br>is a simple sorting algorithm that repeatedly steps through the list, compares adjacent pairs and swaps them if they are in the wrong order. The pass through the list is repeated until the list is sorted</li>
<li><strong>select sort</strong><br>The algorithm proceeds by finding the smallest (or largest, depending on sorting order) element in the unsorted sublist, exchanging (swapping) it with the leftmost unsorted element (putting it in sorted order), and moving the sublist boundaries one element to the right.</li>
<li><strong>insertion sort</strong><br>Insertion sort iterates, consuming one input element each repetition, and growing a sorted output list. At each iteration, insertion sort removes one element from the input data, finds the location it belongs within the sorted list, and inserts it there. It repeats until no input elements remain.<br><a href="https://leetcode.com/problems/insertion-sort-list/" target="_blank" rel="noopener">insertion-sort-list</a></li>
</ul>
<h4 id="advanced-sort"><a href="#advanced-sort" class="headerlink" title="advanced sort"></a>advanced sort</h4><ul>
<li><p>merge sort: why time complexity is O(nlogn), compare mergesort with quicksort</p>
<ul>
<li><p>recursive</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//t: O(nlogn), s: O(n)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">    mergeSort(arr, <span class="keyword">new</span> <span class="keyword">int</span>[arr.length], <span class="number">0</span>, arr.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span>[] temp, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="keyword">int</span> m = (l + r) / <span class="number">2</span>;</span><br><span class="line">        mergeSort(arr, temp, l, m);</span><br><span class="line">        mergeSort(arr , temp, m + <span class="number">1</span>, r);</span><br><span class="line">        merge(arr, l, m, r, temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> l, <span class="keyword">int</span> m, <span class="keyword">int</span> r, <span class="keyword">int</span>[] temp)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; ++i) temp[i] = arr[i];</span><br><span class="line">   <span class="keyword">int</span> i = l, j = m + <span class="number">1</span>, k = l;</span><br><span class="line">   <span class="keyword">while</span> (i &lt; m + <span class="number">1</span> &amp;&amp; j &lt; r + <span class="number">1</span>) &#123;</span><br><span class="line">       <span class="keyword">if</span> (temp[i] &lt;= temp[j]) arr[k++] = temp[i++];</span><br><span class="line">       <span class="keyword">else</span> arr[k++] = temp[j++];</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">while</span> (i &lt; m + <span class="number">1</span>) arr[k++] = temp[i++];</span><br><span class="line">   <span class="keyword">while</span> (j &lt; r + <span class="number">1</span>) arr[k++] = temp[j++];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>iterative</p>
</li>
<li><a href="https://leetcode.com/problems/count-of-range-sum/" target="_blank" rel="noopener">Count of Range Sum</a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Given an integer array nums, return the number of range sums that lie in [lower, upper] inclusive.</span></span><br><span class="line"><span class="comment">//Range sum S(i, j) is defined as the sum of the elements in nums between indices i and j (i ≤ j), inclusive.</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> lower;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> upper;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countRangeSum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> lower, <span class="keyword">int</span> upper)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.lower = lower;</span><br><span class="line">        <span class="keyword">this</span>.upper = upper;</span><br><span class="line">        <span class="keyword">long</span>[] sum = <span class="keyword">new</span> <span class="keyword">long</span>[nums.length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">long</span>[] temp = <span class="keyword">new</span> <span class="keyword">long</span>[nums.length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= nums.length; i++) &#123;</span><br><span class="line">            sum[i] = sum[i - <span class="number">1</span>] + (<span class="keyword">long</span>) nums[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        mergesort(sum, <span class="number">0</span>, sum.length - <span class="number">1</span>, temp);</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">mergesort</span><span class="params">(<span class="keyword">long</span>[] sum, <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">long</span>[] temp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (start &gt;= end) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> mid = start + (end - start) / <span class="number">2</span>;</span><br><span class="line">        mergesort(sum, start, mid, temp);</span><br><span class="line">        mergesort(sum, mid + <span class="number">1</span>, end, temp);</span><br><span class="line">        merge(sum, start, mid, end, temp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">long</span>[] sum, <span class="keyword">int</span> start, <span class="keyword">int</span> mid, <span class="keyword">int</span> end, <span class="keyword">long</span>[] temp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> right = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> index = start;</span><br><span class="line">        <span class="keyword">int</span> low = mid + <span class="number">1</span>, high = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> left = start; left &lt;= mid; left++) &#123;</span><br><span class="line">            <span class="keyword">while</span> (low &lt;= end &amp;&amp; sum[low] - sum[left] &lt; lower) low++;</span><br><span class="line">            <span class="keyword">while</span> (high &lt;= end &amp;&amp; sum[high] - sum[left] &lt;= upper) high++;</span><br><span class="line">            <span class="keyword">while</span> (right &lt;= end &amp;&amp; sum[right] &lt; sum[left]) temp[index++] = sum[right++];</span><br><span class="line">            temp[index++] = sum[left];</span><br><span class="line">            count += high - low;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (right &lt;= end) &#123;</span><br><span class="line">            temp[index++] = sum[right++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt;= end; i++) &#123;</span><br><span class="line">            sum[i] = temp[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>quick sort:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//t: O(nlogn), s: O(1)</span></span><br><span class="line"><span class="comment">//unstable</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>[] n)</span> </span>&#123;</span><br><span class="line">    quickSort(n, <span class="number">0</span>, n.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] n, <span class="keyword">int</span> l, <span class="keyword">int</span> h)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &lt; h) &#123;</span><br><span class="line">        <span class="keyword">int</span> pivotIndex = partition(n, l, h);</span><br><span class="line">        quickSort(n, l, pivotIndex - <span class="number">1</span>);</span><br><span class="line">        quickSort(n, pivotIndex + <span class="number">1</span>, h);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//this can also used for quick select</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] n, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pivot = start;</span><br><span class="line">    <span class="keyword">while</span> (start &lt;= end) &#123;</span><br><span class="line">        <span class="keyword">while</span> (start &lt;= end &amp;&amp; n[start] &lt;= n[pivot]) start++;</span><br><span class="line">        <span class="keyword">while</span> (start &lt;= end &amp;&amp; n[end] &gt; n[pivot]) end--;</span><br><span class="line">        <span class="keyword">if</span> (start &lt; end) swap(n, start, end);</span><br><span class="line">    &#125;</span><br><span class="line">    swap(n, pivot, end);</span><br><span class="line">    <span class="keyword">return</span> end;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] n, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = n[a];</span><br><span class="line">    n[a] = n[b];</span><br><span class="line">    n[b] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>quick select:</p>
<ul>
<li><a href="https://leetcode.com/problems/kth-largest-element-in-an-array/" target="_blank" rel="noopener">Kth Largest Element in an Array</a>: avg time O(n)<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// find kth largest number in array</span></span><br><span class="line"><span class="comment">// avg O(n), worst case: O(n^2), rondomly choose pivot can reduce worst case prob</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findKthLargest</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    Random rand = <span class="keyword">new</span> Random();</span><br><span class="line">    <span class="keyword">int</span> size = nums.length;</span><br><span class="line">    <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> right = size -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">int</span> randomPivot = left + rand.nextInt(right - left + <span class="number">1</span>);</span><br><span class="line">        swap(nums, randomPivot, left);</span><br><span class="line">        <span class="keyword">int</span> idx = partition(nums, left, right, left);</span><br><span class="line">        <span class="keyword">if</span> (idx &lt; size - k) &#123;</span><br><span class="line">            left = idx + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (idx &gt; size - k) &#123;</span><br><span class="line">            right = idx - <span class="number">1</span>;   </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> nums[idx];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums[right];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> pivot)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right &amp;&amp; nums[left] &lt;= nums[pivot]) left++;</span><br><span class="line">        <span class="keyword">while</span>(left &lt;= right &amp;&amp; nums[right] &gt; nums[pivot]) right--;</span><br><span class="line">        <span class="keyword">if</span> (left &lt; right) swap(nums, left, right);</span><br><span class="line">    &#125;</span><br><span class="line">    swap(nums, pivot, right);</span><br><span class="line">    <span class="keyword">return</span> right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = nums[left];</span><br><span class="line">    nums[left] = nums[right];</span><br><span class="line">    nums[right] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="other-advanced-sort"><a href="#other-advanced-sort" class="headerlink" title="other advanced sort"></a>other advanced sort</h4><ul>
<li>heap sort(see point 5 first)</li>
</ul>
<ol>
<li><p>Priority Queue 的底层实现是bcomplete binary min-heap. </p>
<ul>
<li><a href="https://docs.python.org/3/library/heapq.html" target="_blank" rel="noopener">python heapq api</a></li>
<li>log(n) for offer(e), poll()</li>
<li>not sort interval, just know head is largest/smallest one.</li>
<li>remove(e) need O(n) time</li>
<li>do not support for update operation(Dijkstra need use laze deletion)</li>
</ul>
</li>
<li><p>Priority Queue useage</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//let the class implements Comparable&lt;T&gt; interface, and implement compareTo(T that) method</span></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Pair</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(<span class="keyword">int</span> val, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.val = val;</span><br><span class="line">        <span class="keyword">this</span>.count = count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Pair that)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.count - that.count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Queue&lt;Pair&gt; q = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//pass a construct method as argument here</span></span><br><span class="line">Queue&lt;LinkedList&lt;Interval&gt;&gt; q = <span class="keyword">new</span> PriorityQueue&lt;&gt;(<span class="keyword">new</span> Comparator&lt;LinkedList&lt;Interval&gt;&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(LinkedList&lt;Interval&gt; o1, LinkedList&lt;Interval&gt; o2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> o1.getLast().end - o2.getLast().end);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//pass a construct method as argument use java 8 lambda, treat functionality as method argument</span></span><br><span class="line">Queue&lt;LinkedList&lt;Interval&gt;&gt; q = <span class="keyword">new</span> PriorityQueue&lt;&gt;((o1, o2) -&gt; o1.getLast().end - o2.getLast().end);</span><br></pre></td></tr></table></figure>
</li>
<li><p>complete binary min-heap: 任意一个非叶子节点的权值，都不大于其左右子节点的权值, 也就意味着可以通过数组来作为PriorityQueue的底层实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//left = parent*2+1</span></span><br><span class="line"><span class="comment">//right = parent*2+2</span></span><br><span class="line"><span class="comment">//parent = (node-1)/2</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * from harvard</span></span><br><span class="line"><span class="comment"> * Heap - a generic collection class that implements</span></span><br><span class="line"><span class="comment"> * a max-at-top heap using an array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Heap</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T[] contents;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> numItems;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Heap</span><span class="params">(<span class="keyword">int</span> maxSize)</span> </span>&#123;</span><br><span class="line">        contents = (T[])<span class="keyword">new</span> Comparable[maxSize];</span><br><span class="line">        numItems = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Heap</span><span class="params">(T[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Note that we don't copy the array, so that heapsort can</span></span><br><span class="line">        <span class="comment">// sort the array in place.</span></span><br><span class="line">        contents = arr;</span><br><span class="line">        numItems = arr.length;</span><br><span class="line">        makeHeap();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * makeHeap - turn the elements in the contents array into a</span></span><br><span class="line"><span class="comment">     * representation of a max-at-top heap.</span></span><br><span class="line"><span class="comment">     * heapify array, O(n) time.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">makeHeap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> last = contents.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> parentOfLast = (last - <span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = parentOfLast; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            siftDown(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * insert - add the specified item to the heap and sift it up</span></span><br><span class="line"><span class="comment">     * into its proper position.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(T item)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (numItems == contents.length) &#123;</span><br><span class="line">            <span class="comment">// grow the array</span></span><br><span class="line">            T[] newContents = (T[])<span class="keyword">new</span> Comparable[contents.length * <span class="number">2</span>];</span><br><span class="line">            System.arraycopy(contents, <span class="number">0</span>, newContents, <span class="number">0</span>, numItems);</span><br><span class="line">            contents = newContents;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        contents[numItems] = item;</span><br><span class="line">        siftUp(numItems);</span><br><span class="line">        numItems++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * remove and return the item at the top of the heap, and adjust</span></span><br><span class="line"><span class="comment">     * the remaining items so that we still have a heap.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        T toRemove = contents[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Move the element currently the end of the heap to the top</span></span><br><span class="line">        <span class="comment">// and sift it into place.</span></span><br><span class="line">        contents[<span class="number">0</span>] = contents[numItems - <span class="number">1</span>];</span><br><span class="line">        numItems--;</span><br><span class="line">        siftDown(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> toRemove;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * isEmpty - does the heap currently have no items?</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (numItems == <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * siftDown - sift the element in contents[i] down into its</span></span><br><span class="line"><span class="comment">     * correct position in the heap.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">siftDown</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Store a reference to the element being sifted.</span></span><br><span class="line">        T toSift = contents[i];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Find where the sifted element belongs.</span></span><br><span class="line">        <span class="keyword">int</span> parent = i;</span><br><span class="line">        <span class="keyword">int</span> child = <span class="number">2</span> * parent + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (child &lt; numItems) &#123;</span><br><span class="line">            <span class="comment">// If the right child is bigger, compare with it.</span></span><br><span class="line">            <span class="keyword">if</span> (child &lt; numItems - <span class="number">1</span>  &amp;&amp;</span><br><span class="line">                    contents[child].compareTo(contents[child + <span class="number">1</span>]) &lt; <span class="number">0</span>)</span><br><span class="line">                child = child + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Check if we're done.</span></span><br><span class="line">            <span class="keyword">if</span> (toSift.compareTo(contents[child]) &gt;= <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// If not, move child up and move down one level in the tree.</span></span><br><span class="line">            contents[parent] = contents[child];</span><br><span class="line">            parent = child;</span><br><span class="line">            child = <span class="number">2</span> * parent + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        contents[parent] = toSift;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * siftUp - sift the element in contents[i] up into its</span></span><br><span class="line"><span class="comment">     * correct position in the heap.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">siftUp</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Store a reference to the element being sifted.</span></span><br><span class="line">        T toSift = contents[i];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Find where the sifted element belongs.</span></span><br><span class="line">        <span class="keyword">int</span> child = i;</span><br><span class="line">        <span class="keyword">while</span> (child &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> parent = (child - <span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Check if we're done.</span></span><br><span class="line">            <span class="keyword">if</span> (toSift.compareTo(contents[parent]) &lt;= <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// If not, move parent down and move up one level in the tree.</span></span><br><span class="line">            contents[child] = contents[parent];</span><br><span class="line">            child = parent;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        contents[child] = toSift;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>difference with TreeSet, TreeMap</p>
<ul>
<li>heap not sort all element, but TreeSet does</li>
<li>heap allow duplicate, but TreeSet does not(TreeSet use compareTo() check equals, be careful)<br>*<a href="https://leetcode.com/problems/sliding-window-median/submissions/" target="_blank" rel="noopener">Sliding Window Median</a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">double</span>[] medianSlidingWindow(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k) &#123;</span><br><span class="line">    Comparator&lt;Integer&gt; comparator = (a, b) -&gt; nums[a] != nums[b] ? Integer.compare(nums[a], nums[b]) : a - b;</span><br><span class="line">    TreeSet&lt;Integer&gt; left = <span class="keyword">new</span> TreeSet&lt;&gt;(comparator.reversed());</span><br><span class="line">    TreeSet&lt;Integer&gt; right = <span class="keyword">new</span> TreeSet&lt;&gt;(comparator);</span><br><span class="line">    <span class="keyword">double</span>[] result = <span class="keyword">new</span> <span class="keyword">double</span>[nums.length - k + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++) left.add(i);</span><br><span class="line">    balance(left, right); </span><br><span class="line">    result[<span class="number">0</span>] = getMedian(left, right, nums, k);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = k, r = <span class="number">1</span>; i &lt; nums.length; i++, r++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!left.remove(i - k)) right.remove(i - k);</span><br><span class="line">        right.add(i); </span><br><span class="line">        left.add(right.pollFirst());</span><br><span class="line">        balance(left, right); </span><br><span class="line">        result[r] = getMedian(left, right, nums, k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">double</span> <span class="title">getMedian</span><span class="params">(TreeSet&lt;Integer&gt; left, TreeSet&lt;Integer&gt; right, <span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (k % <span class="number">2</span> == <span class="number">0</span>) ? </span><br><span class="line">        ((<span class="keyword">double</span>) nums[left.first()] + nums[right.first()]) / <span class="number">2</span> :</span><br><span class="line">        (<span class="keyword">double</span>) nums[right.first()];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">balance</span><span class="params">(TreeSet&lt;Integer&gt; left, TreeSet&lt;Integer&gt; right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (left.size() &gt; right.size()) right.add(left.pollFirst());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<p>*<a href="https://leetcode.com/problems/sliding-window-maximum/" target="_blank" rel="noopener">Sliding Window Maximum/Min</a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] maxSlidingWindow(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length - k + <span class="number">1</span>];</span><br><span class="line">    Deque&lt;Integer&gt; deq = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (!deq.isEmpty() &amp;&amp; nums[deq.peekLast()] &lt; nums[i])</span><br><span class="line">            deq.pollLast();</span><br><span class="line">        deq.offerLast(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = k; i &lt; nums.length; i++) &#123;</span><br><span class="line">        res[i - k] = nums[deq.peekFirst()];</span><br><span class="line">        <span class="keyword">while</span> (!deq.isEmpty() &amp;&amp; nums[deq.peekLast()] &lt; nums[i])</span><br><span class="line">            deq.pollLast();</span><br><span class="line">        deq.offerLast(i);</span><br><span class="line">        <span class="keyword">if</span> (i - deq.peekFirst() == k) deq.pollFirst(); </span><br><span class="line">    &#125;</span><br><span class="line">    res[nums.length - k] = nums[deq.peekFirst()];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol start="5">
<li>heapify implementation: think about why build heap is O(n)?<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">int</span> n = arr.length; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// Build heap (rearrange array) </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) </span><br><span class="line">        heapify(arr, n, i); </span><br><span class="line"></span><br><span class="line">    <span class="comment">// One by one extract an element from heap </span></span><br><span class="line">    <span class="comment">//interesting, sort ascend need max heap because you need put the heap into tail</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=n-<span class="number">1</span>; i&gt;=<span class="number">0</span>; i--) &#123; </span><br><span class="line">        <span class="comment">// Move current root to end </span></span><br><span class="line">        <span class="keyword">int</span> temp = arr[<span class="number">0</span>]; </span><br><span class="line">        arr[<span class="number">0</span>] = arr[i]; </span><br><span class="line">        arr[i] = temp; </span><br><span class="line"></span><br><span class="line">        <span class="comment">// call max heapify on the reduced heap </span></span><br><span class="line">        heapify(arr, i, <span class="number">0</span>); </span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// To heapify a subtree rooted with node i which is </span></span><br><span class="line"><span class="comment">// an index in arr[]. n is size of heap </span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">heapify</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> n, <span class="keyword">int</span> i)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">int</span> largest = i; <span class="comment">// Initialize largest as root </span></span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">2</span>*i + <span class="number">1</span>; <span class="comment">// left = 2*i + 1 </span></span><br><span class="line">    <span class="keyword">int</span> r = <span class="number">2</span>*i + <span class="number">2</span>; <span class="comment">// right = 2*i + 2 </span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// If left child is larger than root </span></span><br><span class="line">    <span class="keyword">if</span> (l &lt; n &amp;&amp; arr[l] &gt; arr[largest]) </span><br><span class="line">        largest = l; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// If right child is larger than largest so far </span></span><br><span class="line">    <span class="keyword">if</span> (r &lt; n &amp;&amp; arr[r] &gt; arr[largest]) </span><br><span class="line">        largest = r; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// If largest is not root </span></span><br><span class="line">    <span class="keyword">if</span> (largest != i) &#123; </span><br><span class="line">        swap(arr, largest, i)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Recursively heapify the affected sub-tree </span></span><br><span class="line">        heapify(arr, n, largest); </span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] n, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = n[a];</span><br><span class="line">    n[a] = n[b];</span><br><span class="line">    n[b] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li><p><a href="https://leetcode.com/problems/merge-k-sorted-lists/" target="_blank" rel="noopener">Merge k Sorted Lists</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//follow up: 给定一个很长的，长度为n数组。数组是由一个一个小的排序子数组组成，有m个。n&gt;&gt;m。 目标就是将大数组排序。</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (lists==<span class="keyword">null</span>||lists.length==<span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    Queue&lt;ListNode&gt; queue= <span class="keyword">new</span> PriorityQueue&lt;ListNode&gt;(lists.length, (a, b) -&gt; a.val -b.val);</span><br><span class="line">    ListNode dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    ListNode head=dummy;</span><br><span class="line">    <span class="keyword">for</span> (ListNode node:lists)</span><br><span class="line">        <span class="keyword">if</span> (node!=<span class="keyword">null</span>) queue.add(node);</span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty())&#123;</span><br><span class="line">        head.next=queue.poll();</span><br><span class="line">        head=head.next;</span><br><span class="line">        <span class="keyword">if</span> (head.next!=<span class="keyword">null</span>) queue.add(head.next);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/meeting-rooms-ii/" target="_blank" rel="noopener">meeting-rooms-ii</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Given an array of meeting time intervals consisting of start and end times [[s1,e1],[s2,e2],...]</span></span><br><span class="line"><span class="comment">//find the minimum number of conference rooms required.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minMeetingRooms</span><span class="params">(Interval[] intervals)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (intervals == <span class="keyword">null</span> || intervals.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    Arrays.sort(intervals, (a, b) -&gt; a.start == b.start ? a.end - b.end : a.start - b.start);</span><br><span class="line">    PriorityQueue&lt;Integer&gt; pq= <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; intervals.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!pq.isEmpty() &amp;&amp; pq.peek() &lt;= intervals[i].start) pq.poll();</span><br><span class="line">        pq.offer(intervals[i].end);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pq.size();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/minimum-cost-to-hire-k-workers/" target="_blank" rel="noopener">minimum-cost-to-hire-k-workers</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//There are N workers. The i-th worker has a quality[i] and a minimum wage expectation wage[i].</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">mincostToHireWorkers</span><span class="params">(<span class="keyword">int</span>[] quality, <span class="keyword">int</span>[] wage, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = quality.length;</span><br><span class="line">        Worker[] workers = <span class="keyword">new</span> Worker[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</span><br><span class="line">            workers[i] = <span class="keyword">new</span> Worker(quality[i], wage[i]);</span><br><span class="line">        Arrays.sort(workers, (a, b) -&gt; a.ratio().compareTo(b.ratio()));</span><br><span class="line">        <span class="keyword">double</span> ans = <span class="number">1e9</span>;</span><br><span class="line">        <span class="keyword">int</span> sumq = <span class="number">0</span>;</span><br><span class="line">        PriorityQueue&lt;Integer&gt; pool = <span class="keyword">new</span> PriorityQueue(Collections.reverseOrder());</span><br><span class="line">        <span class="keyword">for</span> (Worker worker: workers) &#123;</span><br><span class="line">            pool.offer(worker.quality);</span><br><span class="line">            sumq += worker.quality;</span><br><span class="line">            <span class="keyword">if</span> (pool.size() &gt; K) sumq -= pool.poll();</span><br><span class="line">            <span class="keyword">if</span> (pool.size() == K) ans = Math.min(ans, sumq * worker.ratio());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> quality, wage;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Worker</span><span class="params">(<span class="keyword">int</span> q, <span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">        quality = q;</span><br><span class="line">        wage = w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Double <span class="title">ratio</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">double</span>) wage / quality;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/exam-room/" target="_blank" rel="noopener">exam-room</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//student enters the room must sit in the seat that maximizes the distance to the closest person</span></span><br><span class="line"><span class="comment">//seat O(n), leave O(logn)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExamRoom</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    TreeSet&lt;Integer&gt; students;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ExamRoom</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.N = N;</span><br><span class="line">        students = <span class="keyword">new</span> TreeSet();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">seat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> student = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (students.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> dist = students.first();</span><br><span class="line">            Integer prev = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">for</span> (Integer s: students) &#123;</span><br><span class="line">                <span class="keyword">if</span> (prev != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">int</span> d = (s - prev) / <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">if</span> (d &gt; dist) &#123;</span><br><span class="line">                        dist = d;</span><br><span class="line">                        student = prev + d;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                prev = s;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (N - <span class="number">1</span> - students.last() &gt; dist) student = N - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        students.add(student);</span><br><span class="line">        <span class="keyword">return</span> student;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">leave</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">        students.remove(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//we can do seat log(n) and leave log(n), use treeMap to maintain the intervals candidates, use map to store seat to interval mapping for deleting when leave.</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/find-k-pairs-with-smallest-sums/submissions/" target="_blank" rel="noopener">find-k-pairs-with-smallest-sums</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;<span class="keyword">int</span>[]&gt; kSmallestPairs(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2, <span class="keyword">int</span> k) &#123;</span><br><span class="line">    PriorityQueue&lt;<span class="keyword">int</span>[]&gt; que = <span class="keyword">new</span> PriorityQueue&lt;&gt;((a,b)-&gt;a[<span class="number">0</span>]+a[<span class="number">1</span>]-b[<span class="number">0</span>]-b[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">boolean</span>[][] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[nums1.length][nums2.length];</span><br><span class="line">    List&lt;<span class="keyword">int</span>[]&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span>(nums1.length==<span class="number">0</span> || nums2.length==<span class="number">0</span> || k==<span class="number">0</span>) <span class="keyword">return</span> res;</span><br><span class="line">    que.offer(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;nums1[<span class="number">0</span>], nums2[<span class="number">0</span>], <span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">while</span>(k &gt; <span class="number">0</span> &amp;&amp; !que.isEmpty())&#123;</span><br><span class="line">        <span class="keyword">int</span>[] cur = que.poll();</span><br><span class="line">        res.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;cur[<span class="number">0</span>], cur[<span class="number">1</span>]&#125;);</span><br><span class="line">        <span class="keyword">if</span> ((cur[<span class="number">2</span>] + <span class="number">1</span> &lt; nums1.length) &amp;&amp; !visited[cur[<span class="number">2</span>] + <span class="number">1</span>][cur[<span class="number">3</span>]]) &#123;</span><br><span class="line">            que.offer(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;nums1[cur[<span class="number">2</span>] + <span class="number">1</span>],nums2[cur[<span class="number">3</span>]], cur[<span class="number">2</span>]+<span class="number">1</span>, cur[<span class="number">3</span>]&#125;);</span><br><span class="line">            visited[cur[<span class="number">2</span>] + <span class="number">1</span>][cur[<span class="number">3</span>]] = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ((cur[<span class="number">3</span>] + <span class="number">1</span> &lt; nums2.length) &amp;&amp; !visited[cur[<span class="number">2</span>]][cur[<span class="number">3</span>] + <span class="number">1</span>]) &#123;</span><br><span class="line">            que.offer(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;nums1[cur[<span class="number">2</span>]],nums2[cur[<span class="number">3</span>] + <span class="number">1</span>], cur[<span class="number">2</span>], cur[<span class="number">3</span>] + <span class="number">1</span>&#125;);</span><br><span class="line">            visited[cur[<span class="number">2</span>]][cur[<span class="number">3</span>] + <span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        k--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><a href="https://leetcode.com/problems/rearrange-string-k-distance-apart/" target="_blank" rel="noopener">Rearrange String k Distance Apart</a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Given a non-empty string s and an integer k, rearrange the string such that the same characters are at least distance k from each other.</span></span><br><span class="line"><span class="comment">//If it is not possible to rearrange the string, return an empty string "".</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Tuple</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Tuple</span>&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count;</span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        <span class="keyword">int</span> index;</span><br><span class="line">        Tuple(<span class="keyword">int</span> count, <span class="keyword">char</span> c, <span class="keyword">int</span> index) &#123;</span><br><span class="line">            <span class="keyword">this</span>.count = count;</span><br><span class="line">            <span class="keyword">this</span>.c = c;</span><br><span class="line">            <span class="keyword">this</span>.index = index;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Tuple that)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> that.count - <span class="keyword">this</span>.count;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">rearrangeString</span><span class="params">(String str, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        Queue&lt;Tuple&gt; dead = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</span><br><span class="line">        Queue&lt;Tuple&gt; lives = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span>[] count = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c: str.toCharArray()) &#123;</span><br><span class="line">            count[c - <span class="string">'a'</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (count[i] != <span class="number">0</span>) &#123;</span><br><span class="line">                lives.offer(<span class="keyword">new</span> Tuple(count[i], (<span class="keyword">char</span>)(<span class="string">'a'</span> + i), <span class="number">0</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.length(); ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!dead.isEmpty() &amp;&amp; dead.peek().index &lt;= i) &#123;</span><br><span class="line">                lives.offer(dead.poll());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (lives.isEmpty()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                Tuple t = lives.poll();</span><br><span class="line">                sb.append(t.c);</span><br><span class="line">                <span class="keyword">if</span> (--t.count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    t.index = i + k;</span><br><span class="line">                    dead.offer(t);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://leetcode.com/problems/super-ugly-number/" target="_blank" rel="noopener">Super Ugly Number</a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Write a program to find the nth super ugly number.</span></span><br><span class="line"><span class="comment">//Super ugly numbers are positive numbers whose all prime factors are in the given prime list primes of size k.</span></span><br><span class="line"><span class="comment">//O( log(k)N )</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">solution2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">nthSuperUglyNumberHeap</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>[] primes)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] ugly = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line"></span><br><span class="line">        PriorityQueue&lt;Num&gt; pq = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; primes.length; i++) &#123;</span><br><span class="line">            pq.add(<span class="keyword">new</span> Num(primes[i], <span class="number">1</span>, primes[i]));</span><br><span class="line">        &#125;</span><br><span class="line">        ugly[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            ugly[i] = pq.peek().val;</span><br><span class="line">            <span class="keyword">while</span> (pq.peek().val == ugly[i]) &#123;</span><br><span class="line">                Num nxt = pq.poll();</span><br><span class="line">                pq.add(<span class="keyword">new</span> Num(nxt.p * ugly[nxt.idx], nxt.idx + <span class="number">1</span>, nxt.p));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ugly[n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Num</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Num</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> val;</span><br><span class="line">        <span class="keyword">int</span> idx;</span><br><span class="line">        <span class="keyword">int</span> p;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Num</span><span class="params">(<span class="keyword">int</span> val, <span class="keyword">int</span> idx, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.val = val;</span><br><span class="line">            <span class="keyword">this</span>.idx = idx;</span><br><span class="line">            <span class="keyword">this</span>.p = p;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Num that)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.val - that.val;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://leetcode.com/problems/the-skyline-problem/" target="_blank" rel="noopener">The Skyline problem</a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//The geometric information of each building is represented by a triplet of integers [Li, Ri, Hi], </span></span><br><span class="line"><span class="comment">//where Li and Ri are the x coordinates of the left and right edge of the ith building, respectively, and Hi is its height</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SkyLineProblem</span> </span>&#123;</span><br><span class="line">    <span class="comment">//use PriorityQueue, remove(E e) is O(n) action.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> List&lt;<span class="keyword">int</span>[]&gt; getSkyline(<span class="keyword">int</span>[][] buildings) &#123;</span><br><span class="line">            List&lt;<span class="keyword">int</span>[]&gt; heights = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            List&lt;<span class="keyword">int</span>[]&gt; results = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span>[] building : buildings)&#123;</span><br><span class="line">                heights.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;building[<span class="number">0</span>],-building[<span class="number">2</span>]&#125;);</span><br><span class="line">                heights.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;building[<span class="number">1</span>],building[<span class="number">2</span>]&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            Collections.sort(heights, (a, b) -&gt; a[<span class="number">0</span>] == b[<span class="number">0</span>] ? a[<span class="number">1</span>] - b[<span class="number">1</span>] : a[<span class="number">0</span>] - b[<span class="number">0</span>]);</span><br><span class="line">            Queue&lt;Integer&gt; queue = <span class="keyword">new</span> PriorityQueue&lt;Integer&gt;(Collections.reverseOrder());</span><br><span class="line">            queue.offer(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">int</span> prev = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span>[] height : heights)&#123;</span><br><span class="line">                <span class="keyword">if</span>(height[<span class="number">1</span>] &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                    queue.offer(-height[<span class="number">1</span>]);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    queue.remove(height[<span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(queue.peek() != prev)&#123;</span><br><span class="line">                    results.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;height[<span class="number">0</span>], queue.peek()&#125;);</span><br><span class="line">                    prev = queue.peek();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> results;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>external sort</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">1.For example, for sorting 900 megabytes of data using only 100 megabytes of RAM:</span></span><br><span class="line"><span class="comment">2.Read 100 MB of the data in main memory and sort by some conventional method。 Write the sorted data to disk.</span></span><br><span class="line"><span class="comment">3.Read the first 10 MB (= 100MB / (9 chunks + 1)) of each sorted chunk into input buffers in main memory and allocate the remaining 10 MB for an output buffer. (In practice, it might provide better performance to make the output buffer larger and the input buffers slightly smaller.)</span></span><br><span class="line"><span class="comment">4.Perform a 9-way merge and store the result in the output buffer. Whenever the output buffer fills, write it to the final sorted file and empty it. Whenever any of the 9 input buffers empties, fill it with the next 10 MB of its associated 100 MB sorted chunk until no more data from the chunk is available. This is the key step that makes external merge sort work externally -- because the merge algorithm only makes one pass sequentially through each of the chunks, each chunk does not have to be loaded completely; rather, sequential parts of the chunk can be loaded as needed.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>shell sort</p>
</li>
</ul>
<h2 id="non-compare-based-sort"><a href="#non-compare-based-sort" class="headerlink" title="non-compare based sort"></a>non-compare based sort</h2><ul>
<li>count sort:<br>当输入的元素是n个0到k之间的整数时，它的运行时间是Θ(n + k)。计数排序不是比较排序，排序的速度快于任何比较排序算法。<br>example qustions: <a href="https://leetcode.com/problems/sort-characters-by-frequency/" target="_blank" rel="noopener">sort characters by frequency</a><br><strong>time</strong>: O(n + k)<br><strong>space</strong>: O(n + k)</li>
<li><p><a href="https://leetcode.com/problems/h-index/" target="_blank" rel="noopener">H-Index</a></p>
</li>
<li><p>radix sort:<br>排序过程：将所有待比较数值（正整数）统一为同样的数位长度，数位较短的数前面补零。然后，从最低位开始，依次进行一次排序。这样从最低位排序一直到最高位排序完成以后, 数列就变成一个有序序列。基数排序法将要排序的元素分配至 0~9 个桶。<br><strong>time</strong>:  O(wn) for n keys which are integers of word size w<br><strong>space</strong>: O(w + N)</p>
</li>
<li><p>bucket sort:<br>当使用count sort时, 数组里数值的范围太大怎么办。分范围count sort。<br><strong>time</strong>: O(N + NlogN - NlogM), M为桶的个数<br><strong>space</strong>: O(M)</p>
</li>
<li><a href="https://leetcode.com/problems/top-k-frequent-elements/" target="_blank" rel="noopener">Top K Frequent Elements</a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//count sort</span></span><br><span class="line"><span class="comment">//O(n)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">topKFrequent</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> n : nums) &#123;</span><br><span class="line">        map.put(n, map.getOrDefault(n, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// corner case: if there is only one number in nums, we need the bucket has index 1.</span></span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; buckets = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length + <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        buckets.add(<span class="keyword">new</span> LinkedList&lt;&gt;());</span><br><span class="line">    &#125;</span><br><span class="line">    map.forEach((t, v) -&gt; buckets.get(v).add(t));</span><br><span class="line">    List&lt;Integer&gt; res = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = buckets.size() - <span class="number">1</span>; i &gt; <span class="number">0</span> &amp;&amp; k &gt; <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (buckets.get(i).size() != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; buckets.get(i).size() &amp;&amp; res.size() &lt; k; j++) &#123;</span><br><span class="line">                res.add(buckets.get(i).get(j));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="two-point-related-question-include-sliding-window"><a href="#two-point-related-question-include-sliding-window" class="headerlink" title="two point related question(include sliding window)"></a>two point related question(include sliding window)</h3><ul>
<li>sliding window summary: <a href="https://leetcode.com/problems/find-all-anagrams-in-a-string/discuss/92007/Sliding-Window-algorithm-template-to-solve-all-the-Leetcode-substring-search-problem" target="_blank" rel="noopener">https://leetcode.com/problems/find-all-anagrams-in-a-string/discuss/92007/Sliding-Window-algorithm-template-to-solve-all-the-Leetcode-substring-search-problem</a>.</li>
<li><p><a href="https://leetcode.com/problems/backspace-string-compare/" target="_blank" rel="noopener">backspace-string-compare</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//# is backspace</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">backspaceCompare</span><span class="params">(String S, String T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = S.length() - <span class="number">1</span>, j = T.length() - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> skipS = <span class="number">0</span>, skipT = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &gt;= <span class="number">0</span> || j &gt;= <span class="number">0</span>) &#123; <span class="comment">// While there may be chars in build(S) or build (T)</span></span><br><span class="line">        <span class="keyword">while</span> (i &gt;= <span class="number">0</span>) &#123; <span class="comment">// Find position of next possible char in build(S)</span></span><br><span class="line">            <span class="keyword">if</span> (S.charAt(i) == <span class="string">'#'</span>) &#123;skipS++; i--;&#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (skipS &gt; <span class="number">0</span>) &#123;skipS--; i--;&#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (j &gt;= <span class="number">0</span>) &#123; <span class="comment">// Find position of next possible char in build(T)</span></span><br><span class="line">            <span class="keyword">if</span> (T.charAt(j) == <span class="string">'#'</span>) &#123;skipT++; j--;&#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (skipT &gt; <span class="number">0</span>) &#123;skipT--; j--;&#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= <span class="number">0</span> &amp;&amp; j &gt;= <span class="number">0</span> &amp;&amp; S.charAt(i) != T.charAt(j)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> ((i &gt;= <span class="number">0</span>) != (j &gt;= <span class="number">0</span>)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        i--; j--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/fruit-into-baskets/submissions/" target="_blank" rel="noopener">fruit-into-baskets</a></p>
</li>
<li><a href="https://leetcode.com/problems/longest-substring-with-at-most-two-distinct-characters/" target="_blank" rel="noopener">longest-substring-with-at-most-two-distinct-characters/</a></li>
<li><p><a href="https://leetcode.com/problems/longest-substring-with-at-most-k-distinct-characters/" target="_blank" rel="noopener">longest-substring-with-at-most-k-distinct-characters</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstringKDistinct</span><span class="params">(String s, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    Map&lt;Character, Integer&gt; count = <span class="keyword">new</span> HashMap&lt;Character, Integer&gt;();</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>, i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; s.length(); ++j) &#123;</span><br><span class="line">        count.put(s.charAt(j), count.getOrDefault(s.charAt(j), <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">while</span> (count.size() &gt; k) &#123;</span><br><span class="line">            count.put(s.charAt(i), count.get(s.charAt(i)) - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (count.get(s.charAt(i)) == <span class="number">0</span>) count.remove(s.charAt(i));</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        res = Math.max(res, j - i + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/find-all-anagrams-in-a-string/" target="_blank" rel="noopener">Find All Anagrams in a String</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">findAnagrams</span><span class="params">(String s, String p)</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (s.length() &lt; p.length()) <span class="keyword">return</span> res;</span><br><span class="line">    Map&lt;Character, Integer&gt; pCounts = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    Map&lt;Character, Integer&gt; cCounts = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; p.length(); i++) &#123;</span><br><span class="line">        pCounts.put(p.charAt(i), pCounts.getOrDefault(p.charAt(i), <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        cCounts.put(s.charAt(i), cCounts.getOrDefault(s.charAt(i), <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (cCounts.equals(pCounts)) res.add(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = p.length(); i &lt; s.length(); i++) &#123;</span><br><span class="line">        cCounts.put(s.charAt(i), cCounts.getOrDefault(s.charAt(i), <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        cCounts.put(s.charAt(i - p.length()), cCounts.getOrDefault(s.charAt(i - p.length()), <span class="number">0</span>) - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (cCounts.get(s.charAt(i - p.length())) == <span class="number">0</span>)</span><br><span class="line">            cCounts.remove(s.charAt(i - p.length()));</span><br><span class="line">        <span class="keyword">if</span> (cCounts.get(s.charAt(i)) == <span class="number">0</span>)</span><br><span class="line">            cCounts.remove(s.charAt(i));</span><br><span class="line">        <span class="keyword">if</span> (cCounts.equals(pCounts)) res.add(i - p.length() + <span class="number">1</span>);</span><br><span class="line">    &#125;        </span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/longest-substring-with-at-least-k-repeating-characters/" target="_blank" rel="noopener">longest-substring-with-at-least-k-repeating-characters</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Find the length of the longest substring T of a given string (consists of lowercase letters only) such that every character in T appears no less than k times</span></span><br><span class="line"><span class="comment">//For each h, apply two pointer technique to find the longest substring with at least K repeating characters and the number of unique characters in substring is h.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestSubstring</span><span class="params">(String s, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span>[] str = s.toCharArray();</span><br><span class="line">    <span class="keyword">int</span>[] counts = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">    <span class="keyword">int</span> h, i, j, idx, max = <span class="number">0</span>, unique, noLessThanK;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (h = <span class="number">1</span>; h &lt;= <span class="number">26</span>; h++) &#123;</span><br><span class="line">        Arrays.fill(counts, <span class="number">0</span>);</span><br><span class="line">        i = <span class="number">0</span>; </span><br><span class="line">        j = <span class="number">0</span>;</span><br><span class="line">        unique = <span class="number">0</span>;</span><br><span class="line">        noLessThanK = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (j &lt; str.length) &#123;</span><br><span class="line">            <span class="keyword">if</span> (unique &lt;= h) &#123;</span><br><span class="line">                idx = str[j] - <span class="string">'a'</span>;</span><br><span class="line">                <span class="keyword">if</span> (counts[idx] == <span class="number">0</span>)</span><br><span class="line">                    unique++;</span><br><span class="line">                counts[idx]++;</span><br><span class="line">                <span class="keyword">if</span> (counts[idx] == k)</span><br><span class="line">                    noLessThanK++;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                idx = str[i] - <span class="string">'a'</span>;</span><br><span class="line">                <span class="keyword">if</span> (counts[idx] == k)</span><br><span class="line">                    noLessThanK--;</span><br><span class="line">                counts[idx]--;</span><br><span class="line">                <span class="keyword">if</span> (counts[idx] == <span class="number">0</span>)</span><br><span class="line">                    unique--;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (unique == h &amp;&amp; unique == noLessThanK)</span><br><span class="line">                max = Math.max(j - i, max);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/longest-consecutive-sequence/" target="_blank" rel="noopener">longest consecutive sequence</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hashset, forloop array, for each point, search larger and smaller.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">longestConsecutive</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    Set&lt;Integer&gt; num_set = <span class="keyword">new</span> HashSet&lt;Integer&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> num : nums) num_set.add(num);</span><br><span class="line">    <span class="keyword">int</span> longestStreak = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> num : num_set) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!num_set.contains(num-<span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="keyword">int</span> currentNum = num;</span><br><span class="line">            <span class="keyword">int</span> currentStreak = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (num_set.contains(currentNum+<span class="number">1</span>)) &#123;</span><br><span class="line">                currentNum += <span class="number">1</span>;</span><br><span class="line">                currentStreak += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            longestStreak = Math.max(longestStreak, currentStreak);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> longestStreak;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>*<a href="https://leetcode.com/problems/minimum-window-substring/" target="_blank" rel="noopener">Minimum Window Substring</a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">minWindow</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s == <span class="keyword">null</span> || s.length() &lt; t.length() || s.length() == <span class="number">0</span>) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    Map&lt;Character,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;Character,Integer&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">char</span> c : t.toCharArray()) map.put(c, map.getOrDefault(c, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> left = <span class="number">0</span>, minLeft = <span class="number">0</span>, minLen = s.length()+<span class="number">1</span>, count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> right = <span class="number">0</span>; right &lt; s.length(); right++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(map.containsKey(s.charAt(right)))&#123;</span><br><span class="line">            map.put(s.charAt(right),map.get(s.charAt(right))-<span class="number">1</span>);</span><br><span class="line">            <span class="comment">//this can fall below 0</span></span><br><span class="line">            <span class="keyword">if</span>(map.get(s.charAt(right)) &gt;= <span class="number">0</span>) count ++;</span><br><span class="line">            <span class="keyword">while</span>(count == t.length())&#123;</span><br><span class="line">                <span class="keyword">if</span>(right-left+<span class="number">1</span> &lt; minLen)&#123;</span><br><span class="line">                    minLeft = left;</span><br><span class="line">                    minLen = right-left+<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(map.containsKey(s.charAt(left)))&#123;</span><br><span class="line">                    map.put(s.charAt(left),map.get(s.charAt(left))+<span class="number">1</span>);</span><br><span class="line">                    <span class="comment">//only positive can make difference</span></span><br><span class="line">                    <span class="keyword">if</span>(map.get(s.charAt(left)) &gt; <span class="number">0</span>) count --;</span><br><span class="line">                &#125;</span><br><span class="line">                left ++ ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> minLen&gt;s.length() ? <span class="string">""</span> : s.substring(minLeft,minLeft+minLen);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>Three Sum Smaller/3 sum closest<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Given an array of n integers nums and a target, </span></span><br><span class="line"><span class="comment">//find the number of index triplets i, j, k with 0 &lt;= i &lt; j &lt; k &lt; n that </span></span><br><span class="line"><span class="comment">//satisfy the condition nums[i] + nums[j] + nums[k] &lt; target.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">threeSumSmaller</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    Arrays.sort(nums);</span><br><span class="line">    <span class="keyword">int</span> len = nums.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len-<span class="number">2</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> left = i+<span class="number">1</span>, right = len-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] + nums[left] + nums[right] &lt; target) &#123;</span><br><span class="line">                count += right-left;</span><br><span class="line">                left++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                right--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="sort-related-questions"><a href="#sort-related-questions" class="headerlink" title="sort related questions"></a>sort related questions</h3><ul>
<li><p><a href="https://leetcode.com/problems/wiggle-sort/" target="_blank" rel="noopener">wiggle sort</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果i是奇数，nums[i] &gt;= nums[i - 1]</span></span><br><span class="line"><span class="comment">//如果i是偶数，nums[i] &lt;= nums[i - 1]</span></span><br><span class="line"><span class="comment">//后面的交换不会影响前面的, num[i-1] &lt; num[i] &lt; num[i+1] -&gt; nums[i-1] &lt; nums[i+1]</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">wiggleSort</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++)</span><br><span class="line">        <span class="keyword">if</span>(i%<span class="number">2</span>==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i-<span class="number">1</span>]&gt;nums[i])</span><br><span class="line">                swap(nums, i);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i-<span class="number">1</span>]&lt;nums[i]) </span><br><span class="line">                swap(nums, i);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">      <span class="keyword">int</span> tmp=nums[i];</span><br><span class="line">      nums[i]=nums[i-<span class="number">1</span>];</span><br><span class="line">      nums[i-<span class="number">1</span>]=tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/wiggle-sort-ii/" target="_blank" rel="noopener">wiggle sort2</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//wtf, skip it you cost more than 1 hour</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">wiggleSort</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m = nums.length;</span><br><span class="line">    <span class="keyword">int</span> median = findKthLargest(nums, nums.length/<span class="number">2</span>); ; </span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">1</span>;   <span class="comment">// put larger value at begin odd index</span></span><br><span class="line">    <span class="keyword">int</span> j = m % <span class="number">2</span> == <span class="number">0</span> ? m - <span class="number">2</span> : m - <span class="number">1</span>;  <span class="comment">//put smaller vals at later even index</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">0</span>; l &lt; m; ++l) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[l] &gt; median) &#123;</span><br><span class="line">            <span class="comment">//i is pos for next larger val to put, any odd pos smaller is good</span></span><br><span class="line">            <span class="keyword">if</span> (l &lt; i &amp;&amp; (l % <span class="number">2</span> == <span class="number">1</span>)) <span class="keyword">continue</span>;</span><br><span class="line">            swap(nums, l--, i);</span><br><span class="line">            i += <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[l] &lt; median) &#123;</span><br><span class="line">            <span class="comment">//j is pos for next larger val to put, any even pos lagger is good</span></span><br><span class="line">            <span class="keyword">if</span> (l &gt;= j &amp;&amp; (l % <span class="number">2</span> == <span class="number">0</span>)) <span class="keyword">continue</span>;</span><br><span class="line">            swap(nums, l--, j);</span><br><span class="line">            j -= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//do nothing for medium val</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="other-questions"><a href="#other-questions" class="headerlink" title="other questions:"></a>other questions:</h3><ul>
<li><p><a href="https://leetcode.com/problems/game-of-life/" target="_blank" rel="noopener">Game of Life</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//00 = die  &lt;- die, 01 = die  &lt;- live, 10 = live &lt;- die, 11 = live &lt;- live</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gameOfLife</span><span class="params">(<span class="keyword">int</span>[][] board)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(board == <span class="keyword">null</span> || board.length == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> m = board.length;</span><br><span class="line">    <span class="keyword">int</span> n = board[<span class="number">0</span>].length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j)&#123;</span><br><span class="line">            <span class="keyword">int</span> neighbors = getNeighbors(i, j, m, n, board);</span><br><span class="line">            <span class="keyword">if</span> ((board[i][j] &amp; <span class="number">1</span>) == <span class="number">1</span> &amp;&amp; (neighbors == <span class="number">2</span> || neighbors == <span class="number">3</span>)) &#123;</span><br><span class="line">                board[i][j] = <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> ((board[i][j] &amp; <span class="number">1</span>) == <span class="number">0</span> &amp;&amp; neighbors == <span class="number">3</span>) &#123;</span><br><span class="line">                board[i][j] = <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; ++i)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j)&#123;</span><br><span class="line">            board[i][j] &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getNeighbors</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> m, <span class="keyword">int</span> n, <span class="keyword">int</span>[][] board)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lives = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> x = Math.max(i - <span class="number">1</span>, <span class="number">0</span>); i &lt;= Math.min(i + <span class="number">1</span>, m - <span class="number">1</span>); ++x) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> y = Math.max(j - <span class="number">1</span>, <span class="number">0</span>); j &lt;= Math.min(j + <span class="number">1</span>, n - <span class="number">1</span>); ++y) &#123;</span><br><span class="line">            lives += board[x][y] &amp; <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    lives -= board[i][j] &amp; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> lives;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/insert-interval/" target="_blank" rel="noopener">Insert Interval</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. insertInterval before current, change to null after inserted</span></span><br><span class="line">    <span class="comment">//2. insertInterval after current,</span></span><br><span class="line">    <span class="comment">//3. overlap</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Interval&gt; <span class="title">insert</span><span class="params">(List&lt;Interval&gt; intervals, Interval newInterval)</span> </span>&#123;</span><br><span class="line">        List&lt;Interval&gt; res = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (intervals == <span class="keyword">null</span> || intervals.size() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> Collections.singletonList(newInterval);</span><br><span class="line">        &#125;</span><br><span class="line">        Interval insert = <span class="keyword">new</span> Interval(newInterval.start, newInterval.end);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; intervals.size(); ++i) &#123;</span><br><span class="line">            Interval curInterval = intervals.get(i);</span><br><span class="line">            <span class="keyword">if</span> (insert == <span class="keyword">null</span> || curInterval.end &lt; insert.start) &#123;</span><br><span class="line">                res.add(curInterval);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (curInterval.start &gt; insert.end) &#123;</span><br><span class="line">                res.add(insert);</span><br><span class="line">                res.add(curInterval);</span><br><span class="line">                insert = <span class="keyword">null</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                insert = mergeInterval(curInterval, insert);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (insert != <span class="keyword">null</span>) &#123;</span><br><span class="line">            res.add(insert);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Interval <span class="title">mergeInterval</span> <span class="params">(Interval cur, Interval insert)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> start = Math.min(cur.start, insert.start);</span><br><span class="line">        <span class="keyword">int</span> end = Math.max(cur.end, insert.end);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Interval(start, end);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/merge-intervals/" target="_blank" rel="noopener">Merge Intervals</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Interval&gt; <span class="title">merge</span><span class="params">(List&lt;Interval&gt; intervals)</span> </span>&#123;</span><br><span class="line">    List&lt;Interval&gt; res = <span class="keyword">new</span> LinkedList&lt;Interval&gt;();</span><br><span class="line">    <span class="keyword">if</span>(intervals.size()&lt;<span class="number">2</span>) <span class="keyword">return</span> intervals;</span><br><span class="line">    Collections.sort(intervals, <span class="keyword">new</span> Comparator&lt;Interval&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Interval o1, Interval o2)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> o1.start-o2.start;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    Interval curr = intervals.get(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(Interval iter: intervals) &#123;</span><br><span class="line">        <span class="keyword">if</span>(curr.end &gt;= iter.start) &#123;</span><br><span class="line">            curr.end = Math.max(curr.end,iter.end);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            res.add(curr);</span><br><span class="line">            curr = iter;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    res.add(curr);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/missing-ranges/" target="_blank" rel="noopener">Missing Ranges</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Given a sorted integer array nums, where the range of elements are in the inclusive range [lower, upper], return its missing ranges.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">findMissingRanges</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> lower, <span class="keyword">int</span> upper)</span> </span>&#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (nums == <span class="keyword">null</span>) <span class="keyword">return</span> list;</span><br><span class="line">    <span class="keyword">int</span> n = nums.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> lt = (i == <span class="number">0</span>) ? lower : nums[i - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> gt = (i == n) ? upper : nums[i] - <span class="number">1</span>;</span><br><span class="line">        addRange(list, lt, gt);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addRange</span><span class="params">(List&lt;String&gt; list, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (lo &gt; hi) <span class="keyword">return</span>;</span><br><span class="line">    list.add((lo == hi) ? String.valueOf(lo) : String.format(<span class="string">"%d-&gt;%d"</span>, lo, hi));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/patching-array/" target="_blank" rel="noopener">Patching Array</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Given a sorted positive integer array nums and an integer n, add/patch elements to the array such that any number in range [1, n] inclusive can be formed by the sum of some elements in the array. Return the minimum number of patches required.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minPatches</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> minMiss = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (minMiss &lt;= n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= nums.length) &#123;</span><br><span class="line">            minMiss += minMiss;</span><br><span class="line">            res++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[index] &gt; minMiss) &#123;</span><br><span class="line">                minMiss += minMiss;</span><br><span class="line">                res++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                minMiss += nums[index];</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/perfect-rectangle/" target="_blank" rel="noopener">Perfect Rectangle</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Given N axis-aligned rectangles where N &gt; 0, determine if they all together form an exact cover of a rectangular region.</span></span><br><span class="line"><span class="comment">//Each rectangle is represented as a bottom-left point and a top-right point</span></span><br><span class="line"><span class="number">1</span>. the large rectangle area should be equal to the sum of small rectangles</span><br><span class="line"><span class="number">2</span>. count of all the points should be even, and that of all the four corner points should be one</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isRectangleCover</span><span class="params">(<span class="keyword">int</span>[][] rectangles)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (rectangles.length == <span class="number">0</span> || rectangles[<span class="number">0</span>].length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">int</span> x1 = Integer.MAX_VALUE, x2 = Integer.MIN_VALUE;</span><br><span class="line">    <span class="keyword">int</span> y1 = Integer.MAX_VALUE, y2 = Integer.MIN_VALUE;</span><br><span class="line">    Set&lt;Point&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> area = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>[] rect : rectangles) &#123;</span><br><span class="line">        x1 = Math.min(rect[<span class="number">0</span>], x1); x2 = Math.max(rect[<span class="number">2</span>], x2);</span><br><span class="line">        y1 = Math.min(rect[<span class="number">1</span>], y1); y2 = Math.max(rect[<span class="number">3</span>], y2);</span><br><span class="line">        area += (rect[<span class="number">2</span>] - rect[<span class="number">0</span>]) * (rect[<span class="number">3</span>] - rect[<span class="number">1</span>]);</span><br><span class="line">        List&lt;Point&gt; points = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> x : <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;rect[<span class="number">0</span>], rect[<span class="number">2</span>]&#125;) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> y : <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;rect[<span class="number">1</span>], rect[<span class="number">3</span>]&#125;) &#123;</span><br><span class="line">                points.add(<span class="keyword">new</span> Point(x, y));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        points.stream().filter(point -&gt; !set.add(point)).forEach(set::remove);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!set.contains(<span class="keyword">new</span> Point(x1, y1)) || !set.contains(<span class="keyword">new</span> Point(x1, y2)) || !set.contains(<span class="keyword">new</span> Point(x2, y1)) || !set.contains(<span class="keyword">new</span> Point(x2, y2)) || set.size() != <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> area == (x2-x1) * (y2-y1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>LinedList plus one</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Node <span class="title">addOne</span><span class="params">(Node head)</span> </span>&#123;</span><br><span class="line">        Node not9 = <span class="keyword">new</span> Node(<span class="number">0</span>);</span><br><span class="line">        not9.next = head;</span><br><span class="line">        head = not9;</span><br><span class="line">        <span class="keyword">for</span> (Node node = head; node != <span class="keyword">null</span>; node = node.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (node.val != <span class="number">9</span>) not9 = node;</span><br><span class="line">        &#125;</span><br><span class="line">        not9.val += <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (Node node = not9.next; node != <span class="keyword">null</span>; node = node.next) &#123;</span><br><span class="line">            node.val = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head.val &gt; <span class="number">0</span> ? head : head.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/queue-reconstruction-by-height/" target="_blank" rel="noopener">Queue Reconstruction by Height</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Suppose you have a random list of people standing in a queue. </span></span><br><span class="line"><span class="comment">//Each person is described by a pair of integers (h, k), </span></span><br><span class="line"><span class="comment">//where h is the height of the person </span></span><br><span class="line"><span class="comment">//k is the number of people in front of this person who have a height greater than or equal to h. </span></span><br><span class="line"><span class="comment">//Write an algorithm to reconstruct the queue.</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[][] reconstructQueue(<span class="keyword">int</span>[][] people) &#123;</span><br><span class="line">    <span class="comment">//pick up the tallest guy first</span></span><br><span class="line">    <span class="comment">//when insert the next tall guy, just need to insert him into kth position</span></span><br><span class="line">    <span class="comment">//repeat until all people are inserted into list</span></span><br><span class="line">    Arrays.sort(people, (o1, o2) -&gt; o1[<span class="number">0</span>] != o2[<span class="number">0</span>] ? o2[<span class="number">0</span>] - o1[<span class="number">0</span>] : o1[<span class="number">1</span>] - o2[<span class="number">1</span>]);</span><br><span class="line">    List&lt;<span class="keyword">int</span>[]&gt; res = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span>[] cur : people)&#123;</span><br><span class="line">        <span class="keyword">if</span>(cur[<span class="number">1</span>] &gt;= res.size()) &#123;</span><br><span class="line">            res.add(cur);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            res.add(cur[<span class="number">1</span>],cur);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.toArray(<span class="keyword">new</span> <span class="keyword">int</span>[people.length][]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/trapping-rain-water/" target="_blank" rel="noopener">trapping rain water</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Given n non-negative integers representing an elevation map where the width of each bar is 1, compute how much water it is able to trap after raining.</span></span><br><span class="line"><span class="comment">//O(n) time, O(n) space</span></span><br><span class="line"><span class="comment">//find the bin with max height</span></span><br><span class="line"><span class="comment">//from 0 to this bin, right side max already know</span></span><br><span class="line"><span class="comment">//from length to this bin, left side max already know</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> leftMaxHeight = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> rightMaxHeight = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span>[] leftMax = <span class="keyword">new</span> <span class="keyword">int</span>[height.length];</span><br><span class="line">    <span class="keyword">int</span>[] rightMax = <span class="keyword">new</span> <span class="keyword">int</span>[height.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; height.length; ++i) &#123;</span><br><span class="line">        leftMaxHeight = Math.max(leftMaxHeight, height[i - <span class="number">1</span>]);</span><br><span class="line">        leftMax[i] = leftMaxHeight;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = height.length - <span class="number">2</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        rightMaxHeight = Math.max(rightMaxHeight, height[i + <span class="number">1</span>]);</span><br><span class="line">        rightMax[i] = rightMaxHeight;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; height.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> lowerBar = Math.min(leftMax[i], rightMax[i]);</span><br><span class="line">        res += (lowerBar &gt; height[i]) ? lowerBar - height[i]: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><a href="https://leetcode.com/problems/trapping-rain-water-ii/" target="_blank" rel="noopener">trapping rain water 2</a></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TrappingRainWaterii</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Cell</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Cell</span>&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> x;</span><br><span class="line">            <span class="keyword">int</span> y;</span><br><span class="line">            <span class="keyword">int</span> h;</span><br><span class="line">            Cell(<span class="keyword">int</span> xx, <span class="keyword">int</span> yy, <span class="keyword">int</span> hh) &#123;x = xx; y = yy; h = hh;&#125;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Cell that)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.h - that.h;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trapRainWater</span><span class="params">(<span class="keyword">int</span>[][] heightMap)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (heightMap == <span class="keyword">null</span> || heightMap.length == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> n = heightMap.length;</span><br><span class="line">            <span class="keyword">int</span> m = heightMap[<span class="number">0</span>].length;</span><br><span class="line">            Queue&lt;Cell&gt; outer = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">            <span class="keyword">boolean</span>[][] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[n][m];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (i == <span class="number">0</span> || i == n - <span class="number">1</span> || j == <span class="number">0</span> || j == m - <span class="number">1</span>) &#123;</span><br><span class="line">                        outer.offer(<span class="keyword">new</span> Cell(i, j, heightMap[i][j]));</span><br><span class="line">                        visited[i][j] = <span class="keyword">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span>[][] dirs = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;-<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">            <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (!outer.isEmpty()) &#123;</span><br><span class="line">                Cell cur = outer.poll();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span>[] dir : dirs) &#123;</span><br><span class="line">                    <span class="keyword">int</span> nx = cur.x + dir[<span class="number">0</span>];</span><br><span class="line">                    <span class="keyword">int</span> ny = cur.y + dir[<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">if</span> (nx &gt;= <span class="number">0</span> &amp;&amp; nx &lt; n &amp;&amp; ny &gt;= <span class="number">0</span> &amp;&amp; ny &lt; m &amp;&amp; !visited[nx][ny]) &#123;</span><br><span class="line">                        res += Math.max(<span class="number">0</span>, cur.h - heightMap[nx][ny]);</span><br><span class="line">                        <span class="comment">//keypoint</span></span><br><span class="line">                        outer.offer(<span class="keyword">new</span> Cell(nx, ny, Math.max(cur.h, heightMap[nx][ny])));</span><br><span class="line">                        visited[nx][ny] = <span class="keyword">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Rearrange Array</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">然后是一道关于按照固定的顺序重新排序，多少次排序才能回到初始顺序的题目，我们总是把第x个位置的元素移到第y个位置，比如【0，1，2，3】就是完全不换顺序，一次排序就回去了；【3，2，1，0】是位置3和位置0互换，位置2和位置1互换，两次排序就能回到原顺序；而【1，2，3，0】就是每次把一个位置上的元素往后移动一个位置，那显然转一圈就回来了。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">举个例子，原来的input为[20, 34, 7, 9], 排序要求为[1, 3, 2, 0]</span></span><br><span class="line"><span class="comment">一次排序后：</span></span><br><span class="line"><span class="comment">[20, 34, 7, 9]  -&gt; [34, 9, 7, 20]</span></span><br><span class="line"><span class="comment">二次排序后:</span></span><br><span class="line"><span class="comment">[34, 9, 7, 20]  -&gt; [9, 20, 7, 34]</span></span><br><span class="line"><span class="comment">三次排序后：</span></span><br><span class="line"><span class="comment">[9, 20, 7, 34]  -&gt; [20, 34, 7, 9]  (此时和初始顺序一致，所以是用了三个iteration恢复原样)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">排序规则[1, 3, 2, 0]的意思是把在位置1的元素排到第0个位置，位置3的元素排到第2个位置，位置2的元素还是在位置2，位置0的元素放到位置3去。 排序规则不变，每次只是Input被按照规则改变了顺序。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minRearrange</span><span class="params">(<span class="keyword">int</span>[] pattern)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = pattern.length;</span><br><span class="line">    <span class="keyword">boolean</span>[] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[n];</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (visited[i]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">int</span> j = i, k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            visited[j] = <span class="keyword">true</span>;</span><br><span class="line">            k++;</span><br><span class="line">            j = pattern[j];</span><br><span class="line">            <span class="keyword">if</span> (j == i) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span> (j &lt; <span class="number">0</span> || j &gt;= n || visited[j]) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ans = lcm(ans, k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">lcm</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a / gcd(a, b) * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b == <span class="number">0</span> ? a : gcd(b, a % b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="string-related-problem"><a href="#string-related-problem" class="headerlink" title="string related problem"></a>string related problem</h3><ul>
<li><p>read4 and read4Repeat</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> <span class="keyword">extends</span> <span class="title">Reader4</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span>[] buf4 = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">int</span> i4 = <span class="number">0</span>, n4 = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">(<span class="keyword">char</span>[] buf, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; n) &#123;     </span><br><span class="line">            <span class="keyword">if</span> (i4 &gt;= n4) &#123;</span><br><span class="line">                i4 = <span class="number">0</span>;</span><br><span class="line">                n4 = read4(buf4);</span><br><span class="line">                <span class="keyword">if</span> (n4 == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            buf[i++] = buf4[i4++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://leetcode.com/problems/palindrome-pairs/" target="_blank" rel="noopener">Palindrome Pairs</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; palindromePairs(String[] words) &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; ret = <span class="keyword">new</span> ArrayList&lt;&gt;(); </span><br><span class="line">    <span class="keyword">if</span> (words == <span class="keyword">null</span> || words.length &lt; <span class="number">2</span>) <span class="keyword">return</span> ret;</span><br><span class="line">    Map&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;String, Integer&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;words.length; i++) map.put(words[i], i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;words.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=words[i].length(); j++) &#123; </span><br><span class="line">            String str1 = words[i].substring(<span class="number">0</span>, j);</span><br><span class="line">            String str2 = words[i].substring(j);</span><br><span class="line">            <span class="keyword">if</span> (isPalindrome(str1)) &#123;</span><br><span class="line">                String str2rvs = <span class="keyword">new</span> StringBuilder(str2).reverse().toString();</span><br><span class="line">                <span class="keyword">if</span> (map.containsKey(str2rvs) &amp;&amp; map.get(str2rvs) != i) &#123;</span><br><span class="line">                    ret.add(Arrays.asList(map.get(str2rvs), i));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (isPalindrome(str2) &amp;&amp; str2.length()!=<span class="number">0</span>) &#123;</span><br><span class="line">                String str1rvs = <span class="keyword">new</span> StringBuilder(str1).reverse().toString();</span><br><span class="line">                <span class="keyword">if</span> (map.containsKey(str1rvs) &amp;&amp; map.get(str1rvs) != i) &#123; </span><br><span class="line">                    ret.add(Arrays.asList(i, map.get(str1rvs)));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> left = <span class="number">0</span>, right = str.length() - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">        <span class="keyword">if</span> (str.charAt(left++) != str.charAt(right--)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>add binary</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addBinary</span><span class="params">(String a, String b)</span> </span>&#123;</span><br><span class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">int</span> i = a.length() - <span class="number">1</span>, j = b.length() -<span class="number">1</span>, carry = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &gt;= <span class="number">0</span> || j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> sum = carry;</span><br><span class="line">        <span class="keyword">if</span> (j &gt;= <span class="number">0</span>) sum += b.charAt(j--) - <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= <span class="number">0</span>) sum += a.charAt(i--) - <span class="string">'0'</span>;</span><br><span class="line">        sb.append(sum % <span class="number">2</span>);</span><br><span class="line">        carry = sum / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (carry != <span class="number">0</span>) sb.append(carry);</span><br><span class="line">    <span class="keyword">return</span> sb.reverse().toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>compress string, “aaaabbccc” to “a4b2c3”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">compress</span><span class="params">(<span class="keyword">char</span>[] chars)</span> </span>&#123;</span><br><span class="line">    StringBuilder res = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(index &lt; chars.length)&#123;</span><br><span class="line">        <span class="keyword">char</span> currentChar = chars[index];</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(index &lt; chars.length &amp;&amp; chars[index] == currentChar)&#123;</span><br><span class="line">            index++;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        res.append(currentChar);</span><br><span class="line">        <span class="keyword">if</span>(count &gt; <span class="number">1</span>) res.append(count);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="line-sweep-problem"><a href="#line-sweep-problem" class="headerlink" title="line sweep problem"></a>line sweep problem</h3><p>*<a href="https://leetcode.com/problems/rectangle-area-ii/" target="_blank" rel="noopener">rectangle-area-ii</a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Find the total area covered by all rectangles in the plane</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rectangleArea</span><span class="params">(<span class="keyword">int</span>[][] rectangles)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> OPEN = <span class="number">0</span>, CLOSE = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span>[][] events = <span class="keyword">new</span> <span class="keyword">int</span>[rectangles.length * <span class="number">2</span>][<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//add two horizontal line for each rectangle</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>[] rec: rectangles) &#123;</span><br><span class="line">        events[t++] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;rec[<span class="number">1</span>], OPEN, rec[<span class="number">0</span>], rec[<span class="number">2</span>]&#125;;</span><br><span class="line">        events[t++] = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;rec[<span class="number">3</span>], CLOSE, rec[<span class="number">0</span>], rec[<span class="number">2</span>]&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    Arrays.sort(events, (a, b) -&gt; Integer.compare(a[<span class="number">0</span>], b[<span class="number">0</span>]));</span><br><span class="line">    List&lt;<span class="keyword">int</span>[]&gt; active = <span class="keyword">new</span> ArrayList();</span><br><span class="line">    <span class="keyword">int</span> cur_y = events[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span>[] event: events) &#123;</span><br><span class="line">        <span class="keyword">int</span> y = event[<span class="number">0</span>], typ = event[<span class="number">1</span>], x1 = event[<span class="number">2</span>], x2 = event[<span class="number">3</span>];</span><br><span class="line">        <span class="keyword">if</span> (y != cur_y) &#123;</span><br><span class="line">            <span class="keyword">long</span> mergedLen = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> cur = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span>[] xs: active) &#123;</span><br><span class="line">                cur = Math.max(cur, xs[<span class="number">0</span>]);</span><br><span class="line">                mergedLen += Math.max(xs[<span class="number">1</span>] - cur, <span class="number">0</span>);</span><br><span class="line">                cur = Math.max(cur, xs[<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            ans += mergedLen * (y - cur_y);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//add and remove from the active horizontal line</span></span><br><span class="line">        <span class="keyword">if</span> (typ == OPEN) &#123;</span><br><span class="line">            active.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;x1, x2&#125;);</span><br><span class="line">            Collections.sort(active, (a, b) -&gt; Integer.compare(a[<span class="number">0</span>], b[<span class="number">0</span>]));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; active.size(); ++i)</span><br><span class="line">                <span class="keyword">if</span> (active.get(i)[<span class="number">0</span>] == x1 &amp;&amp; active.get(i)[<span class="number">1</span>] == x2) &#123;</span><br><span class="line">                    active.remove(i);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cur_y = y;</span><br><span class="line">    &#125;</span><br><span class="line">    ans %= <span class="number">1_000_000_007</span>;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>) ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>*<a href="https://leetcode.com/problems/car-fleet/" target="_blank" rel="noopener">car-fleet</a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//N cars are going to the same destination along a one lane road.</span></span><br><span class="line"><span class="comment">//Each car i has a constant speed speed[i], and initial position position[i] miles towards the target along the road.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">carFleet</span><span class="params">(<span class="keyword">int</span> target, <span class="keyword">int</span>[] position, <span class="keyword">int</span>[] speed)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = position.length;</span><br><span class="line">    Car[] cars = <span class="keyword">new</span> Car[N];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i) &#123;</span><br><span class="line">        cars[i] = <span class="keyword">new</span> Car(position[i], (<span class="keyword">double</span>) (target - position[i]) / speed[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    Arrays.sort(cars, (a, b) -&gt; a.position - b.position);</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>, t = N;</span><br><span class="line">    <span class="keyword">while</span> (--t &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cars[t].time &lt; cars[t-<span class="number">1</span>].time) ans++; </span><br><span class="line">        <span class="keyword">else</span> cars[t-<span class="number">1</span>] = cars[t];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans + (t == <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> position;</span><br><span class="line">    <span class="keyword">double</span> time;</span><br><span class="line">    Car(<span class="keyword">int</span> p, <span class="keyword">double</span> t) &#123;</span><br><span class="line">        position = p;</span><br><span class="line">        time = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>*<a href="https://leetcode.com/problems/couples-holding-hands/" target="_blank" rel="noopener">couples-holding-hands</a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minSwapsCouples</span><span class="params">(<span class="keyword">int</span>[] row)</span> </span>&#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row.length; i++) </span><br><span class="line">        map.put(row[i], i);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> tgt = <span class="number">0</span>, cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row.length; i += <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (row[i] % <span class="number">2</span> == <span class="number">0</span>) tgt = row[i] + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> tgt = row[i] - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> ngh = row[i + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (ngh != tgt) &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">            row[map.get(tgt)] = ngh; <span class="comment">// push neighbor to a later position in row.</span></span><br><span class="line">            map.put(ngh, map.get(tgt)); <span class="comment">// update neighbor position in the map</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="reservoir-sampling"><a href="#reservoir-sampling" class="headerlink" title="reservoir sampling"></a>reservoir sampling</h3><ul>
<li><a href="https://leetcode.com/problems/random-pick-index/" target="_blank" rel="noopener">Random Pick Index</a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//follow up, given target and tree, return element with same probability</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] nums;</span><br><span class="line">    Random rand = <span class="keyword">new</span> Random();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Solution</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nums = nums;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">pick</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] != target) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (rand.nextInt(++count) == <span class="number">0</span>) res = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/11/sort/" data-id="ck8dovzvr0006by9zml19bg9r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/01/11/cpb/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Combination, Permutation, Backtracking
        
      </div>
    </a>
  
  
    <a href="/2016/11/05/summary-for-stack-related-question/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">summary for stack related question</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/01/11/crack-interview/">crack interview</a>
          </li>
        
          <li>
            <a href="/2019/01/11/graph/">graph</a>
          </li>
        
          <li>
            <a href="/2019/01/11/search/">Search</a>
          </li>
        
          <li>
            <a href="/2019/01/11/dp/">dp,greedy</a>
          </li>
        
          <li>
            <a href="/2019/01/11/cpb/">Combination, Permutation, Backtracking</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>